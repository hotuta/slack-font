#ifndef NODE_WEBRTC_SHDEVICEMANAGERWRAPPER_H
#define NODE_WEBRTC_SHDEVICEMANAGERWRAPPER_H

//
//  SHDeviceManagerWrapper.h
//  Screenhero
//
//  Created by D.E. Goodman-Wilson on 5/27/15.
//  Copyright (c) 2015 Slack Technologies, Inc. All rights reserved.
//

#include <nan.h>
#include "webrtc/base/sigslot.h"

class SHDeviceManagerWrapper : public sigslot::has_slots<>, public Nan::ObjectWrap
{
public:
    static void Init(v8::Local<v8::Object> target);

private:
    static NAN_METHOD(New);
    static Nan::Persistent<v8::Function> constructor;

    SHDeviceManagerWrapper(Nan::Callback *callback);
    ~SHDeviceManagerWrapper();

    //getters and setters
    //input
    static NAN_GETTER(GetAudioInputDevices);
    static NAN_SETTER(SetAudioInputDevice);
    static NAN_GETTER(GetSelectedAudioInputDevice);

    //output
    static NAN_GETTER(GetAudioOutputDevices);
    static NAN_SETTER(SetAudioOutputDevice);
    static NAN_GETTER(GetSelectedAudioOutputDevice);

    //Signal to wire up with SHAudioDeviceManager.
    void SignalAudioDeviceListDidChange(void);

    Nan::Callback *devicesChangedCallback_; //this is treated as basically a weak reference, since the delegate will (god willing) outlive this class.
};

#endif //NODE_WEBRTC_SHDEVICEMANAGER_H
